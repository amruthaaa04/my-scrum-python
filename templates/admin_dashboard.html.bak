{% extends "base.html" %}
{% block title %}Admin{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="h2">Admin Dashboard</h1>
  <a href="{{ url_for('admin_create_event') }}" class="btn btn-primary rounded-pill px-4 py-2 shadow-sm fw-semibold">
    + New Event
  </a>
</div>

<h4 class="mb-3">All Events</h4>

<table class="table table-striped table-bordered align-middle">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Venue</th>
      <th>Start</th>
      <th>End</th>
      <th>Image</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    {% for ev in events %}
    <tr>
      <td>{{ ev.id }}</td>
      <td>{{ ev.title }}</td>
      <td>{{ ev.venue }}</td>
      <td>{{ ev.start_time | nice_dt }}</td>
      <td>{{ ev.end_time | nice_dt }}</td>

      <td class="text-center">
        <img src="{{ url_for('uploads', filename=ev.image_filename) }}" 
             style="width:90px; height:48px; object-fit:cover; border-radius:6px; border:1px solid #ddd;">
      </td>

      <td class="text-center d-flex gap-2 justify-content-center">

        <!-- Modern PILL EDIT -->
        <a href="{{ url_for('admin_edit_event', event_id=ev.id) }}"
           class="btn btn-warning rounded-pill d-flex align-items-center gap-2 px-3 py-1 shadow-sm fw-semibold"
           style="font-size:15px;">
          <i class="bi bi-pencil-square" style="font-size:18px;"></i>
          Edit
        </a>

        <!-- Modern PILL DELETE -->
        <a href="{{ url_for('admin_delete_event', event_id=ev.id) }}"
           onclick="return confirm('Delete this event permanently?');"
           class="btn btn-danger rounded-pill d-flex align-items-center gap-2 px-3 py-1 shadow-sm fw-semibold"
           style="font-size:15px;">
          <i class="bi bi-trash3-fill" style="font-size:18px;"></i>
          Delete
        </a>

      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
